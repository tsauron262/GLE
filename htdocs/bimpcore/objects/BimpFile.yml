table: bimp_file
common_fields: 1

parent_module: 
    field_value: parent_module
parent_object: 
    field_value: parent_object_name
parent_id_property: id_parent
    
labels: 
    name: fichier

objects: 
    user_delete: 
        relation: hasOne
        delete: 0
        instance: 
            bimp_object: 
                module: bimpcore
                name: Bimp_User
                
fields:
    parent_module:
        label: Module
        input: 
            type: hidden
        required: 1
            
    parent_object_name:
        label: Objet
        input: 
            type: hidden
        required: 1
            
    id_parent:
        label: ID Objet
        type: id_parent
        input: 
            type: hidden
        required: 1
            
    file_name:
        label: Nom
            
    file_ext: 
        label: Extension
        input: 
            type: hidden
            
    file_size: 
        label: Taille 
        type: int
        input: 
            type: hidden
            
    description:
        label: Description
        type: text
        input:
            auto_expand: 1
            rows: 1
            
    deleted: 
        label: Supprimé
        type: bool
        default_value: 0
        
    user_delete: 
        label: Supprimé par
        type: id_object
        object: user_delete
        default_value: 0
        
    date_delete: 
        label: Supprimé le
        type: datetime

forms:
    upload: 
        rows:
            - field: parent_module
            - field: parent_object_name
            - field: id_parent
            - label: Fichier
              custom: 1
              input_name: file
              input:
                  type: file_upload
              required: 1
            - field: file_name
              label: Nom à donner au fichier
            - field: description
    edit:
        rows:
            - field: file_name
            - field: description
            
lists:
    default:
        title: Fichiers
        checkboxes: 1
        bulk_actions: 
            - label: Supprimer les fichiers sélectionnés
              icon: trash
              onclick: deleteSelectedObjects('list_id', $(this));
              btn_class: deleteSelectedObjects
        add_form_name: upload
        edit_btn: 1
        edit_form: edit
        delete_btn: 
            callback: isDeletable
        sort_field: id
        sort_way: asc
        n: 10
        extra_btn:
            callback: getDefaultListExtraButtons
        cols:
            type: 
                label: Type
                value: 
                    callback: displayType
            nom:
                field: file_name
            size: 
                field: file_size
            date:
                label: Date
                field: date_create
            descripton: 
                field: description
                
    