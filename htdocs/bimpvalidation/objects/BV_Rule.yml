table: bv_rule
icon: fas_sliders-h
common_fields: 1

labels: 
    name: règle de validation
    name_plur: règles de validation
    is_female: 1
    
fields:         
    type: 
        label: Type de validation
        values: 
            array: types
            
    all_objects: 
        label: Tous les objets
        type: bool
        default_value: 0
        
    objects:
        label: Objets
        type: items_list
        items_braces: 1
        items_add_all_btn: 1
        values: 
            array: objects_list 
        display_if: 
            field_name: all_objects
            show_values: 0
    
    all_secteurs: 
        label: Tous les secteurs
        type: bool
        default_value: 0
        
    secteurs:
        label: Secteurs
        type: items_list
        items_braces: 1
        items_add_all_btn: 1
        values: 
            callback: 
                method: getSecteursArray
                params: 
                    - 0
        display_if: 
            field_name: all_secteurs
            show_values: 0
                    
    val_min: 
        label: Valeur minimale
        type: float
        decimals: 8
        
    val_max: 
        label: valeur maximale
        type: float
        decimals: 8
        
    extra_params: 
        label: Paramètres supplémentaires
        type: json
        displays: 
            default: 
                label: Par défaut
                type: callback
                method: displayExtraParams
        input: 
            type: custom
            content: 
                callback: renderExtraParamsInput
        searchable: 0
        depends_on: type,objects,secteurs
        
    all_users: 
        label: Tout le monde
        type: bool
        default_value: 0
        
    user_superior: 
        label: Sup. hiérarchique du demandeur
        type: bool
        default_value: 0
        display_if: 
            field_name: all_users
            show_values: 0
        
    users: 
        label: Utilisateurs
        type: items_list
        items_data_type: id_object
        object: user
        items_sortable: 1
        items_braces: 1 
        input: 
            type: search_user
        display_if: 
            field_name: all_users
            show_values: 0
        
    groups: 
        label: Groupes
        type: items_list
        items_data_type: id_object
        object: group
        items_sortable: 1
        items_braces: 1
        values: 
            array: userGroups
        display_if: 
            field_name: all_users
            show_values: 0
        
    active: 
        label: Active
        type: bool
        default_value: 1
    
filters: 
    sur_marge: 
        label: Sur Marge
        type: check_list
        items: 
            1: OUI
            0: NON
            
    is_sup: 
        label: Sup. hiérarchique seulement
        type: check_list
        items: 
            1: OUI
            0: NON
            
filters_panels: 
    default: 
        filters: 
            type: 
            secteurs: 
            objects: 
            sur_marge: 
            is_sup:
      
lists_cols: 
    col_objects: 
        label: Objet
        min_width: 100
        value: 
            callback: displayObjects    
        search: 
            input: 
                type: select
                options:
                    options: 
                        array: searchObjects
    col_secteurs: 
        label: Secteurs
        min_width: 120
        value: 
            callback: displaySecteurs
    col_users: 
        label: Utilisateurs
        value: 
            callback: displayUsers
            
lists: 
    default: 
        title: Régles de validation
        configurable: 1
        checkboxes: 1
        bulk_actions:
            - label: supprimer les règles sélectionnées
              icon: fas_trash-alt
              onclick: deleteSelectedObjects('list_id', $(this))
        filters_panel: default
        sort_field: val_max
        sort_way: asc
        n: 10
        add_form_name: default
        edit_btn: 1
        delete_btn: 1
        cols: 
            type: 
            col_objects:
            col_secteurs: 
                
            val_min: 
            val_max: 
            extra_params: 
            col_users:
            groups:
            active: 
                edit: 1
    
