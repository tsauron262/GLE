table: emprunt
common_fields: 0

labels:
    name: Emprunt
    name_plur: Emprunts
    is_female: 1


objects:
    ammortissement:
        relation: hasMany
        delete: 1
        instance:
            bimp_object:
                name: ammortissement
    prod_interet:
        extends: product
        relation: hasOne
        delete: 0
        instance:
            id_object:
                field_value: id_interet
    prod_assurance:
        extends: product
        relation: hasOne
        delete: 0
        instance:
            id_object:
                field_value: id_assurance
    prod_capital:
        extends: product
        relation: hasOne
        delete: 0
        instance:
            id_object:
                field_value: id_capital
    prod_accessoire:
        extends: product
        relation: hasOne
        delete: 0
        instance:
            id_object:
                field_value: id_accessoire
                
    fournisseur:
        relation: hasOne
        delete: 0
        instance:
            id_object:
                field_value: id_fourn
    account:
        relation: hasOne
        delete: 0
        instance:
            dol_object:
                module: compta/bank
                file: account
            id_object:
                field_value: banque

fields:
    id:
        label: ID
        type: int
    banque:
        label: Banque
        type: id_object
        object: account
        value:
            callback: getDefaultBankAccount
        input:
            type: select_mysoc_account
    id_fourn:
        label: Fournisseur
        type: id_object
        object: fournisseur
    id_interet:
        label: Prod interet
        type: id_object
        object: prod_interet
    id_assurance:
        label: Prod assurance
        type: id_object
        object: prod_assurance
    id_capital:
        label: Prod capital
        type: id_object
        object: prod_capital
    id_accessoire:
        label: Prod accessoire
        type: id_object
        object: prod_accessoire
    pourcentage_frais:
        label: Pourcentage frais
        type: percent
        default_value: 0
    fk_paiement:
            label: Type
            type: int
            values:
                array: modeReglements
        
lists:
    default:
        title: Amortissement
        icon: fas_percent
        configurable: 0
        enable_search: 1
        pagination: 0
        checkboxes: 1
        add_btn: 1
        has_total: 1
        add_form_name: default
        edit_btn: 1
        delete_btn: 1
        total_row: 1
        n: 0
        cols:
            banque:
            id_fourn:
                
#graph:
#    restant:
#        title: Capital restant
#        xDateConfig:
#            field: Date_ECHEANCE
#            date1: 1
#            date2: 2
#            def: 1year
#        y: â‚¬
#        use_k: 1
#        yConfig:
#            fields:
##                pop:
##                    type: line
##                    title: Pop
##                    field: CAPITAL_RESTANT_DU
##                    filters:
##                        Banque: 1
##                nef:
##                    type: line
##                    title: Nef
##                    field: CAPITAL_RESTANT_DU
##                    filters:
##                        Banque: 2
#                pop2:
#                    type: line
#                    title: Pop2
#                    field: MONTANT_ECHEANCE
#                    filters:
#                        Banque: 1
#                nef2:
#                    type: line
#                    title: Nef2
#                    field: MONTANT_ECHEANCE
#                    filters:
#                        Banque: 2
#            fields:
#                filed: CAPITAL_RESTANT_DU
