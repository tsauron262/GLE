table: bic_user_contrat
icon: fas_file
common_fields: 0

parent_module: bimpinterfaceclient
parent_id_property: id_user
parent_object: BIC_UserClient

labels: 
    name: contrat associé
    name_plur: contrats associés

objects: 
    contrat: 
        relation: hasOne
        delete: 0
        instance: 
            bimp_object: 
                module: bimpcontract
                name: BContract_contrat
            id_object: 
                field_value: id_contrat
fields:
    id_user:
        label: Utilisateur
        type: id_parent
        input:
            type: hidden
        required: 1
    id_contrat:
        label: Contrat
        type: id_object
        object: contrat
        required: 1
        input: 
            type: select
            options: 
                array: userClientAvailableContrats
        search: 
            input: 
                type: search_object
    read_ticket_in_contrat:
        label: Voir tous les tickets du contrat
        type: bool
        default_value: 1

lists:
    default:
        title: Contrats associés
        icon: fas_file-signature
        checkboxes: 1
        sort_field: id
        sort_way: desc
        n: 10
        add_btn: 1
        add_form_name: addAssoContrat
        add_btn_label: Associer un contrat à cet utilisateur
        delete_btn: 1
        cols:
            id_user: 
            id_contrat:
            read_ticket_in_contrat:
                edit: 1
                
    public_user_client: 
        extends: default
        enable_search: 0
        cols: 
            id_user: unset
        
forms: 
    addAssoContrat:
        rows:
            - field: id_contrat
            - field: read_ticket_in_contrat
    editAssoContrat:
        rows:
            - field: id_contrat
              edit: 0
            - field: read_ticket_in_contrat
