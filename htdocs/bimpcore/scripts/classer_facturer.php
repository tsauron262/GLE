<?php

require_once("../../main.inc.php");

ini_set('display_errors', 1);
require_once __DIR__ . '/../Bimp_Lib.php';

//llxHeader();

echo '<!DOCTYPE html>';
echo '<html lang="fr">';

echo '<head>';
//echo '<link rel="stylesheet" type="text/css" href="' . DOL_URL_ROOT . '/bimpcore/views/css/ticket.css' . '"/>';
echo '<script src="/test2/includes/jquery/js/jquery.min.js?version=6.0.4" type="text/javascript"></script>';
echo '</head>';

echo '<body>';


global $db;
$tabRef = array('CFOLD8CF-1907005','CFOLD8CF-1904219','CFOLD8CF-1904270','CF1909-3039','CFOLD8CF-1904339','CFOLD8CF-1904859','CF1907-0387','CF1907-0696','CF1908-2387','CFOLD8CF-1906818','CFOLD8CF-1907702','CFOLD8CF-1906978','CFOLD8CF-1906975','CF1908-2319','CF1908-2486','CF1908-2032','CFOLD8CF-1907176','CF1909-3472','CF1907-1201','CF1907-0567','CFOLD8CF-1907240','CFOLD8CF-1904151','CFOLD8CF-1907616','CF1909-3740','CFOLD8CF-1905056','CF1909-3977','CF1909-3290','CFOLD8CF-1907624','CF1909-2750','CFOLD8CF-1902723','CFOLD8CF-1904905','CF1907-1134','CFOLD8CF-1905968','CFOLD8CF-1906214','CFOLD8CF-1902282','CFOLD8CF-1906216','CFOLD8CF-1907697','CF1907-1248','CFOLD8CF-1904285','CF1907-1174','CFOLD8CF-1905195','CF1907-0364','CF1909-2982','CFOLD8CF-1903757','CF1907-0844','CFOLD8CF-1906948','CF1909-2761','CFOLD8CF-1906190','CFOLD8CF-1907071','CF1907-0378','CF1907-1385','CF1907-0803','CF1908-1867','CF1908-1868','CF1908-1660','CF1908-1952','CF1907-1508','CF1908-2474','CF1908-2293','CF1909-2524','CF1908-2151','CF1909-2724','CF1909-2588','CF1908-2114','CF1908-2149','CF1909-2567','CF1908-2338','CF1908-2344','CF1908-2165','CF1909-2612','CF1908-2226','CF1909-2646','CF1909-2756','CF1909-2771','CF1909-2682','CF1909-3015','CF1909-2947','CF1909-3001','CF1909-3246','CF1909-3490','CF1909-3121','CF1909-3466','CF1909-3514','CF1909-3257','CF1909-3391','CF1909-3289','CF1909-3893','CF1907-0297','CFOLD8CF-1906415','CF1908-2268','CF1907-0705','CFOLD8CF-1901285','CFOLD8CF-1805981','CF1907-0161','CFOLD8CF-1906546','CFOLD8CF-1904394','CFOLD8CF-1906051','CFOLD8CF-1903262','CFOLD8CF-1907538','CFOLD8CF-1907695','CF1907-1534','CF1909-3271','CF1909-2849','CF1909-2526','CF1907-0417','CF1907-0418','CF1907-0015','CFOLD8CF-1906603','CF1907-0903','CF1907-0667','CFOLD8CF-1806327','CF1909-3100','CF1909-3251','CF1909-3331','CF1907-0568','CF1909-3597','CF1907-1529','CFOLD8CF-1906268','CFOLD8CF-1907228','CF1909-3129','CF1909-3397','CF1907-0401','CF1909-3042','CF1908-1631','CF1907-1497','CF1907-1291','CF1909-3483','CF1909-3673');
$sql = $db->query("SELECT rowid FROM llx_commande_fournisseur WHERE ref IN ('".implode("','", $tabRef)."')");

while ($ln = $db->fetch_object($sql)){
    $commFourn = BimpCache::getBimpObjectInstance("bimcommercial", 'Bimp_commandeFourn', $ln->rowid);
    $result = $commFourn->setObjectAction('forceStatus', 0, array(
           'status_type' => 'invoice',
           'invoice_status' => 2
       ));
}