table: bs_inter
parent_id_property: id_ticket
parent_object: BS_Ticket

labels:
    name: intervention
    is_female: 1

objects: 
    ticket: 
        relation: hasOne
        delete: 0
        instance: 
            bimp_object: BS_Ticket
            id_object: 
                field_value: id_ticket
                
    tech_user: 
        relation: hasOne
        delete: 0
        instance: 
            bimp_object:
                module: bimpcore
                name: Bimp_User
            id_object: 
                field_value: tech_id_user
                
fields:
    id_ticket:
        label: Ticket
        type: id_parent
        object: ticket
        input: 
            type: hidden
        required: 1
            
    tech_id_user:
        label: Technicien
        type: id_object
        input: 
            type: search_user
        object: tech_user
        sort_option: 
            default: 
                label: nom utilisateur
                join_field: lastname
                
    timer:
        label: Durée
        type: time_last
        input: 
            type: timer
        default_value: 0
        display: 
            default: 
                type: timer
        searchable: 0
        
    priorite:
        label: Priorité
        type: int
        values: 
            array: priorities
        required: 1
    
    status: 
        label: Statut
        type: int
        values: 
            array: status
        required: 1
                    
    description:
        label: Description
        type: text
        input:
            rows: 3
            auto_expand: 1
        sortable: 1
        searchable: 1
    
list:
    title: Interventions
    checkboxes: 1
    bulk_actions: 
        - label: Supprimer les interventions sélectionnées
          icon: fas_trash-alt
          onclick: deleteSelectedObjects('list_id', $(this));
          btn_class: deleteSelectedObjects
    sort_field: id
    sort_way: desc
    n: 10
    cols:
        id:
            label: ID
            field: id
        user_create:
            label: Créé par
            field: user_create
        date_create:
            label: Début
            field: date_create
        description:
            field: description
        tech_user: 
            label: Technicien
            field: tech_id_user
        duree:
            field: timer
        priorite:
            field: priorite
            edit: 1
        status:
            field: status
            edit: 1
    add_form_name: default
    edit_btn: 1
    update_btn: 1
    delete_btn: 1
    inline_view: default
    page_btn: 1

fields_tables: 
    infos: 
        rows:
            - field: id_ticket
              display: card
            - field: tech_id_user
              display: nom_url
            - field: timer
            - field: priorite
            - field: status
            - field: description

views:
    default: 
        title: nom
        edit_form: default
        delete_btn: 1
        no_reload: 1
        buttons:
            - label: Fermer
              icon_before: times
              classes: btn,btn-default
              attr:
                  onclick: closeInterView($(this));
        rows: 
            - cols:
                - type: custom
                  custom:
                      callback: renderDefaultView
                      
    full:
        no_reload: 1
        rows: 
            - cols:
                - type: view
                  col_lg: 5
                  col_md: 8
                  col_sm: 12
                  view: 
                      name: chrono
                      panel: 0
                      
                - type: view
                  col_lg: 7
                  col_md: 12
                  col_sm: 12
                  view: 
                      name: data
                      panel: 0
                      
    chrono: 
        no_reload: 1
        rows:
            - cols:
                - type: custom
                  custom:
                      callback: renderChronoView
                      
    data: 
        rows:
            - cols:
                  - type: object_common_fields
                    col_lg: 4
                    col_sm: 12
                  - type: fields_table
                    col_lg: 8
                    col_sm: 12
                    fields_table:
                        name: infos

    card:
        panel: 0
        rows:
            - cols:
                  - type: fields_table
                    col_lg: 12
                    fields_table:
                        panel: 0
                        name: infos
        
views_lists: 
    user_currents:
        title: Vos interventions en cours
        item_view: card
        view_btn: 1
        add_btn: 0
        edit_form: default
        item_col_lg: 4
        item_col_md: 6
        item_modal_view: default
        list_filters: 
            callback: 
                method: getUserCurrentIntersFilters
        