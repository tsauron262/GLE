bootstrap: 1
title: Bimp Contrat

js: 
    0: /bimpcommercial/views/js/mails.js

objects:
    contrat:
        instance:
            bimp_object: BContract_contrat
            id_object:
                request: id
    serials:
        instance:
            bimp_object: BContract_Serials_Imei
            
    inter:
        instance:
            bimp_object: 
                module: bimptechnique
                name: BT_ficheInter
    bimp_comm: 
        instance: 
            bimp_object: 
                name:  BimpComm
                module: bimpcommercial
    
    
    
sections:
    - type: object_header
      object_header: 
          object: contrat
    - type: nav_tabs
      nav_tabs: 
          - id: fiche_contrat
            title: Fiche contrat
            struct: 
                type: view
                view: 
                    panel: 1
                    name: fiche_contrat
                    object: contrat
          - id: contenu_contrat
            title: Contenu
            struct:
                type: view
                view:
                    panel: 1
                    object: contrat
                    name: lines
#          - id: serials
#            title: N° de série / N° IMEI
#            struct:
#                type: list
#                list:
#                    name: bimp
#                    object: serials
          - id: contact_adresse_contrat
            title: Contact / Adresse
            struct: 
                type: custom
                custom: 
                    callback: 
                        method: renderContacts
                        object: contrat
          - id: files
            title: Fichiers
            struct: 
                type: rows
                rows:                                                   
                    - cols: 
                        - type: list
                          list: 
                              title: Fichier joints
                              name: default
                              panel: 1
                              object: contrat
                              children: files                                  
                    - cols: 
                        - type: custom
                          custom:
                            callback: 
                              method: renderExtraFile
                              object: contrat
          - id: echeancier
            objects_change_reload: BContract_echeancier, BContract_contrat
            title: Echéancier
            struct:
                type: view
                view:
                    panel: 1
                    name: echeancier
                    object: contrat
          - id: avenant
#            show:
#                callback:
#                    method: canShowAdmin
#                    object: contrat
            objects_change_reload: BContract_contrat, BContract_echeancier, BContract_contratLine
            title:
                callback:
                    method: getTitreAvenantSection
                    object: contrat
            struct:
                type: view
                view:
                    panel: 0
                    name: avenant
                    object: contrat
          - id: inter
            title: Interventions
            struct:
                type: view
                view:
                    panel: 1
                    name: inter
                    object: contrat
          - id: divers
            title: Divers (admin)
            show: 
                  callback:
                      method: iAmAdmin
                      object: contrat
            struct: 
                    type: custom
                    custom: 
                        callback: 
                            method: renderBimpOjectDivers
                            object: contrat
    - type: custom
      custom: 
          callback: 
              method: renderNotesList
              object: contrat
              params:
                  - 1
    
    - type: custom
      custom: 
          callback: 
              method: renderDemandesList
              object: contrat
              params:
                  - 1
              
    - type: buttons
      buttons:
          - label: Liste des contrats
            url:
                controller: index
            icon_before: chevron-left
            classes: 
                array: btn,btn-primary
