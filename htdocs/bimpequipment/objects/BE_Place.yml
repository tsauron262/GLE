table: be_equipment_place
common_fields: 1
positions: 1

parent_object: Equipment
parent_id_property: id_equipment

labels:
    name: emplacement
    
objects: 
    client:
        relation: hasOne
        delete: 0
        instance: 
            dol_object: societe
            id_object:
                field_value: id_client
        card: societe_card
        
    contact:
        relation: hasOne
        delete: 0
        instance: 
            dol_object: contact
            id_object:
                field_value: id_contact
                
    entrepot:
        relation: hasOne
        delete: 0
        instance: 
            dol_object: 
                module: product/stock
                file: entrepot
            id_object: 
                field_value: id_entrepot
    
    user: 
        relation: hasOne
        delete: 0
        instance: 
            dol_object: user
            id_object: 
                field_value: id_user
                
fields: 
    id_equipment: 
        label: Equipement
        type: id_parent
        
    type: 
        label: Type
        values: 
            array: types
    
    id_client:
        label: Client
        type: id_object
        object: client
        input: 
            type: search_societe
            societe_type: customer
        display_if:
            field_name: type
            show_values: 1
        display: 
            nom_url: 
                type: nom_url
            card: 
                type: card
        
    id_contact:
        label: Contact
        type: id_object
        object: contact
        values: 
            array: contacts
        display_if:
            field_name: type
            show_values: 1
        display: 
            nom_url: 
                type: nom_url
            card: 
                type: card
        depends_on: id_client
    
    id_entrepot:
        label: Entrepôt
        type: id_object
        object: entrepot
        input: 
            type: search_entrepot
        display_if:
            field_name: type
            show_values: 2
        display: 
            nom_url: 
                type: nom_url
    
    id_user: 
        label: Utilisateur
        type: id_object
        object: user
        input: 
            type: search_user
        display_if:
            field_name: type
            show_values: 3
        default_value:
            prop:
                name: id
                object: 
                    global: user
        display: 
            nom_url: 
                type: nom_url
            card:
                type: card
                card: user_card
        
    place_name: 
        label: Nom de l'emplacement
        display_if: 
            field_name: type
            show_values: 4
        
    infos: 
        label: Informations
        type: text
        input: 
            rows: 1
            auto_expand: 1
            note: 1
        sortable: 0
        searchable: 0
            
    date:
        label: Date d'arrivée
        type: datetime
        required: 1
        sortable: 0
        
lists:
    default: 
        title: Emplacements
        icon: map-marker
        objects_change_reload: BE_Place
        add_form_name: default
        add_btn_label: Nouvel emplacement
        sort_field: id
        sort_way: desc
        n: 10
        update_btn: 1
        td_style: 
            callback: getTdStyle
        cols:
            name: 
                label: Emplacement
                value: 
                    callback: displayPlace 
            date: 
                field: date
            infos: 
                field: infos
                edit: 1