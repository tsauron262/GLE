table: bmp_event_montant
common_fields: 0

parent_object: BMP_Event
parent_id_property: id_event

labels:
    name: montant
    
objects: 
    category: 
        relation: hasOne
        delete: 0
        instance: 
            bimp_object: BMP_CategorieMontant
            id_object: 
                field_value: id_category_montant
    
    type_montant:
        relation: hasOne
        delete: 0
        instance: 
            bimp_object: BMP_TypeMontant
            id_object: 
                field_value: id_montant
            
fields: 
    id_event: 
        label: Evénement
        type: id_parent
    
    id_category_montant: 
        label: Catégorie
        type: id_object
        object: category
        values: 
            array: categories
        display: 
            type: nom
        sortable: 1
        search: 1
            
    id_montant:
        label: Type montant
        type: id_object
        object: type_montant
        values: 
            array: types_montants
        display:
            type: nom
        sortable: 1
        search: 
            input: 
                type: select
                options:  
                    array: allTypes
        depends_on: id_category_montant
        input:
            display_if:
                input_name: id_category_montant
                hide_values: 0,
    amount: 
        label: Montant HT
        type: money
        sortable: 1
        search:
            type: value_part
            part_type: beginning
            search_on_key_up: 1
        
    confirmed:
        label: Confirmé
        type: bool
        default_value: 0
        sortable: 1
        search: 1
            
    type: 
        label: Type
        type: int
        values: 
            prop: 
                object: type_montant
                name: types
                is_static: 1
        input: 
            type: hidden
            
list:
    title: Montants
    checkboxes: 1
    bulk_actions:
        - label: supprimer les lignes sélectionnées
          icon: trash
          onclick: deleteSelectedObjects('list_id', $(this))
    sort_col: id
    sort_way: desc
    n: 25
    update_btn: 1
    add_form: default
    delete_btn: 1
    cols: 
        category:
            field: id_category_montant
        type: 
            field: id_montant
        amount: 
            field: amount
            edit: 1
        taxe:
            label: TVA
            value: 
                callback: getTva
        confirmed: 
            field: confirmed
            edit: 1
    extra_cols: 
        callback: getCoProdsCols