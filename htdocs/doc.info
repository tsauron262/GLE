

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `llx_fichinter` AS (select `rowid` AS `rowid`,`fk_soc` AS `fk_soc`,`fk_projet` AS `fk_projet`,`fk_contrat` AS `fk_contrat`,`ref` AS `ref`,1 AS `entity`,`tms` AS `tms`,`datec` AS `datec`,`date_valid` AS `date_valid`,`datei` AS `datei`,`fk_user_author` AS `fk_user_author`,`fk_user_valid` AS `fk_user_valid`,`fk_statut` AS `fk_statut`,`duree` AS `duree`,`description` AS `description`,`note_private` AS `note_private`,`note_public` AS `note_public`,`model_pdf` AS `model_pdf`,'' AS `extraparams` from `llx_Synopsis_fichinter` where 1);


CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW llx_Synopsis_fichinter as (SELECT f.`rowid`, `fk_soc`, `fk_projet`, `fk_contrat`, `fk_commande`, `ref`, `tms`, `datec`, `date_valid`, `datei`, `fk_user_author`, `fk_user_valid`, `fk_statut`, `duree`, `description`, `note_private`, `note_public`, `model_pdf`, `total_ht`, `total_tva`, `total_ttc`, `natureInter`, `entity` FROM llx_fichinter f, llx_synopsisfichinter sf WHERE f.rowid = sf.rowid)

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW llx_Synopsis_fichinterdet as (SELECT f.`rowid`, `fk_fichinter`, `date`, `description`, `duree`, `rang`, `fk_typeinterv`, `fk_depProduct`, `tx_tva`, `pu_ht`, `qte`, `total_ht`, `total_tva`, `total_ttc`, `fk_contratdet`, `fk_commandedet`, `isForfait` FROM llx_fichinterdet f, llx_synopsisfichinterdet sf WHERE f.rowid = sf.rowid)

BIMP
INSERT INTO  `synopsis_bimp`.`llx_document_model` (
`rowid` ,
`nom` ,
`entity` ,
`type` ,
`libelle` ,
`description`
)
VALUES (
NULL ,  'azur_annexe',  '1',  'propal', NULL , NULL
);



INSTALLATION SUR NEW VERSION DOLIBARR :{
    Renommer projet => 1projet
    renommer fichinter => 1fichinter
    renommer main.inc.php => 1main.inc.php
    renommer core/modules/ficheinter => 1fichinter


    Copier 
    Synopsis et babel dans
    -/
    -/admin
    -/core/modules/ (fichier + dossier)
    -/core/lib/ 

    --
    + Exception a copier egalement
    --

    /core/modules/moddemendeInterv.class.php
    /core/modules/contratGA
    /core/modules/contratGMAO
    /core/modules/demendeInterv
    /core/modules/fichinter *

    /core/lib/synopsisdemandeinterv.lib.php
    /core/lib/task.class.php //Louche pas de class ici normalement

    /fichinter *
    /projet *

    * Remplacemnt des fichier d'origine X3




 //Refactoring coeur
require\([a-zA-z0-9/."'_-]*.class.php   Pour rajouter _once
}


Parametrage :
    - conf/conf.php
    - Synopsis_Hrm/orange/lib/confs/Conf.php (Pour gestion ressources humaine)
Zimbra
    - dans le compte admin tous les contacte a partager avec qui on veut
    - chaque utilisateur responsable de ressource peut partager le calandrier de la ressource (dans l'avenir l'admin aussi)




MODIFICATION DU COEUR {
    - main.inc.php (Pour ajouter les hook synopsis + modif du path)
    - societe | societe.class.php (aj de $option = "customer"; ln 1244 pour arriver directement dans l'onglet client ou prospect)
    - propal | capsim : ajout du chrono dans la fiche propal
    - proopal | capsim : pas de ref brouillon propal.class
}




Creation des vue pour install 2 avec base client commune : {
    CREATE VIEW gle2_societe_address as SELECT * FROM gle1_societe_address;
    CREATE VIEW gle2_societe as SELECT * FROM gle1_societe;
    CREATE VIEW gle2_societe_commerciaux as SELECT * FROM gle1_societe_commerciaux;
    CREATE VIEW gle2_societe_extrafields as SELECT * FROM gle1_societe_extrafields;
    CREATE VIEW gle2_societe_log as SELECT * FROM gle1_societe_log;
    CREATE VIEW gle2_societe_prices as SELECT * FROM gle1_societe_prices;
    CREATE VIEW gle2_societe_remise as SELECT * FROM gle1_societe_remise;
    CREATE VIEW gle2_societe_remise_except as SELECT * FROM gle1_societe_remise_except;
    CREATE VIEW gle2_societe_rib as SELECT * FROM gle1_societe_rib;
}






