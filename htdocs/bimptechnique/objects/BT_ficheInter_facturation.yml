bootstrap: 1
table: fichinter_facturation
icon: fas_file-invoice-dollar
parent_module: bimptechnique
parent_id_property: fk_fichinter
parent_object: BT_ficheInter
labels:
    name: Facturation
    name_plur: Facturations
    is_female: 1

objects:
    fk_parent:
        instance:
            bimp_object: BT_ficheInter
        id_object:
            field_value: fk_fichinter
    facture:
        instance:
            bimp_object:
                module: bimpcommercial
                name: Bimp_Facture
            id_object:
                field_value: id_facture
    commande:
        instance:
            bimp_object:
                module: bimpcommercial
                name: Bimp_Commande
            id_object:
                field_value: id_commande
    
fields:
    fk_fichinter:
        label: Fiche d'intervention
        type: id_object
        object: fk_parent
    id_commande:
        label: Commande
        type: id_object
        object: commande
    fi_lines:
        label: Lignes de la FI
        type: text
    id_commande_line:
        label: Ligne de la commande
        type: int
    is_vendu:
        label: Service/Déplacement vendu
        type: bool
        input:
            type: toggle
    id_facture:
        label: Facture
        type: id_object
        object: facture
    total_ht_vendu:
        label: Total HT vendu
        type: money
    tva_tx:
        label: Taux de TVA
        type: percent
    total_ht_depacement:
        label: Total HT depacement
        type: money
    remise:
        label: Remise commercial (Sur le supplément)
        type: percent
    
    
lists:
    in_fiche:
        checkboxes: 1
        title: Facturation
        delete_btn: 1
        list_filters:
            callback: getListFilterDefault
        extra_btn:
            callback: getListExtraButtons
        cols:
            is_vendu:
            displayAssocLines:
                label: Lignes de la fiche
                value:
                    callback: displayAssocLines
            total_ht_vendu:
            tva_tx:
            displayTTC:
                label: Total TTC vendu
                value:
                    callback: displayTTC
            total_ht_depacement:
            remise:
            displayHTfacture:
                label: HT réellement facturé
                value:
                    callback: displayHTfacture
            displayFactureAssoc:
                label: Facture associée
                value:
                    callback: displayFactureAssoc
            displayCommande:
                label: Commande
                value:
                    callback: displayCommande
             
forms:
    addRemise:
        title: Appliquer une remise sur la ligne de facturation
        rows:
            