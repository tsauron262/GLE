bootstrap: 1

title: 
    callback: 
        object: equipment
        method: getPageTitle
        
js:
    - /bimpequipment/views/js/equipment.js
    - /bimpapple/views/js/gsx.js

objects:
    equipment:
        instance: 
            bimp_object: Equipment
            id_object:
                request: id

sections:
    - type: object_header
      object_header:
          object: equipment
    - type: nav_tabs
      nav_tabs:
          - id: infos
            title: Fiche
            struct: 
                type: rows
                rows: 
                    - cols: 
                        - type: view
                          view:
                              name: infos
                              panel: 1
                              object: equipment
                        - type: list
                          list: 
                              panel: 1
                              object: equipment
                              children: places
#          - id: logiciels
#            title: Logiciels / Réseaux
#            struct: 
#                type: rows
#                rows: 
#                    - cols: 
#                        - type: list
#                          list: 
#                              object: equipment
#                              children: logiciels

          - id: locations
            title: Locations
            show: 
                is_module_active: bimplocation
            struct: 
                type: custom
                custom: 
                    callback: 
                        method: renderLocationsList
                        object: equipment
                        
          - id: reservations
            title: Réservations
            struct: 
                type: rows
                rows: 
                    - cols: 
                        - type: view
                          view: 
                              name: reservations
                              object: equipment
            show:
                callback:
                    method: useReservations
                    object: equipment
                              
          - id: prets
            title: Prêts
            struct: 
                type: custom
                custom: 
                    callback: renderPretsList
            show:
                callback:
                    method: isDolModuleActif
                    object: equipment
                    params:
                        - bimpsupport
                    
          - id: sav
            title: SAV
            struct: 
                type: custom
                custom: 
                    callback: renderSavList
            show:
                callback:
                    method: useSav
                    object: equipment
          - id: hotline
            title: Hotline
            struct: 
                type: custom
                custom: 
                    callback: renderHotlineList
            show:
                callback:
                    method: isDolModuleActif
                    object: equipment
                    params:
                        - bimpsupport
                    
          - id: inventory
            title: Inventaires
            struct: 
                type: custom
                custom: 
                    callback: renderInventory
            show:
                callback:
                    method: useReservations
                    object: equipment
                    
          - id: achat
            title: Achat
            struct:
                type: custom
                custom:
                    callback: renderAchats
            show:
                  conf: 
                      module: bimpcommercial
                      name: use_link_achat_fourn_equipment
                    
          - id: divers
            title: Divers (admin)
            icon: fas_tools
            show: 
                callback:
                    method: iAmAdmin
                    object: client
            struct: 
                type: custom
                custom: 
                    callback: 
                        method: renderBimpOjectDivers
                        object: equipment
           
    - type: buttons
      buttons:
          - label: Liste des équipements
            url:
                controller: index
            icon_before: chevron-left
            classes: 
                array: btn,btn-primary
